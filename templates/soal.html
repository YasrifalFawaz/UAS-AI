<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Soal - {{ tingkat|capitalize }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body class="soal-page">

<h1>Latihan Soal ({{ tingkat|capitalize }})</h1>

<p class="timer">
    ‚è± Waktu pengerjaan: <span id="time">0</span> detik
</p>

<p>
    Jawablah soal berikut dengan teliti.  
    Sistem akan mengevaluasi jawaban dan waktu pengerjaan Anda.
</p>

<form method="post">
    <input type="hidden" name="waktu" id="waktu">

    <!-- PILIHAN GANDA -->
    <h2>Pilihan Ganda</h2>

    {% for s in soal.pilihan_ganda %}
    {% set idx = loop.index0 %}
    <div class="soal-box">
        <p><strong>{{ loop.index }}. {{ s.pertanyaan }}</strong></p>

        {% for opsi in s.opsi %}
        <label>
            <input type="radio"
                   name="pg{{ idx }}"
                   value="{{ opsi }}"
                   required>
            {{ opsi }}
        </label>
        {% endfor %}
    </div>
    {% endfor %}

    <!-- ESSAY HITUNGAN -->
    <h2>Soal Hitungan (Essay)</h2>

    {% for s in soal.essay %}
    {% set idx = loop.index0 %}
    <div class="soal-box">
        <p><strong>{{ loop.index }}. {{ s.pertanyaan }}</strong></p>
        <input type="number"
               name="essay{{ idx }}"
               step="any"
               required
               placeholder="Masukkan hasil perhitungan">
    </div>
    {% endfor %}

    <button type="submit" class="submit-btn">
        Kirim Jawaban
    </button>
</form>

<script>
    let waktu = 0;
    setInterval(() => {
        waktu++;
        document.getElementById("time").innerText = waktu;
        document.getElementById("waktu").value = waktu;
    }, 1000);
</script>

</body>
</html>
